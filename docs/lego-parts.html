<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WQS0X98RMY"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-WQS0X98RMY');
    </script>
    
    <title>Ganorabricks — LEGO® Parts</title>
    <link rel="stylesheet" href="style.css">
    <script src="prices.js"></script>
</head>
<body>

<!-- NAVBAR -->
<div id="navbar"></div>

<!-- HERO / INTRO -->
<section>
    <h1 class="section-title">LEGO® Parts</h1>
    <p>I offer a wide variety of new and used LEGO® parts. Everything is sorted, cleaned, and securely stored. Contact me via email for questions and shipping quotes. <strong>Payments only via Paypal Goods & Services.</strong></p>
</section>

<!-- STORES -->
<section>
    <h2 class="section-title">Shop My Stores</h2>
    <div class="category-grid">
        <div class="card" style="display: flex; align-items: center; justify-content: space-between; gap: 18px;">
            <div style="display: flex; align-items: center; gap: 16px;">
                <img src="assets/parts/bricklink-logo.svg" style="width:140px;">
                <div>
                    <p>Visit my full BrickLink inventory.</p>
                </div>
            </div>
            <a class="btn-stud small" href="https://store.bricklink.com/Ganorabricks#/terms" target="_blank">Go to BrickLink</a>
        </div>

        <div class="card" style="display: flex; align-items: center; justify-content: space-between; gap: 18px;">
            <div style="display: flex; align-items: center; gap: 16px;">
                <img src="assets/parts/brickowl-logo.png" style="width:140px; background: #1976d2; padding: 12px; border-radius: 8px;">
                <div>
                    <p>Browse my BrickOwl store listings.</p>
                </div>
            </div>
            <a class="btn-stud small" href="https://ganorabricks.brickowl.com/" target="_blank">Go to BrickOwl</a>
        </div>
    </div>
</section>

<!-- GALLERY -->
<section>
    <h2 class="section-title">Inventory</h2>
    
    <!-- Tabs -->
    <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('sets')">Sets</button>
        <button class="tab-btn" onclick="switchTab('parts')">Clean Parts</button>
    </div>
    
    <!-- Tab Content -->
    <div id="sets-tab" class="tab-content active">
        <div class="gallery-grid" id="sets-cards"></div>
    </div>
    
    <div id="parts-tab" class="tab-content">
        <div class="gallery-grid" id="parts-cards"></div>
    </div>
</section>

<!-- FOOTER -->
<div id="footer"></div>

<script src="script.js"></script>
<script>
// Define product cards data
const setsCards = [
    {
        setId: '5009015',
        image: '',
        setNumber: '5009015',
        useSetImage: true,
        title: 'Cerebro',
        description: 'LEGO set 5009015 - new in box',
        price: '',
        imageWidth: '120px'
    },
    {
        setId: '40764',
        image: '',
        setNumber: '40764',
        useSetImage: true,
        title: 'Easter Bunny Surprise',
        description: 'LEGO set 40764 - new in box (2 available)',
        price: '',
        imageWidth: '120px'
    },
    {
        setId: '40782',
        image: '',
        setNumber: '40782',
        useSetImage: true,
        title: 'Tropical Rainforest Diorama',
        description: 'LEGO set 40782 - new in box',
        price: '',
        imageWidth: '120px'
    },
    {
        setId: '40686',
        image: '',
        setNumber: '40686',
        useSetImage: true,
        title: 'Trade Federation Troop Carrier',
        description: 'LEGO set 40686 - new in box ',
        price: '',
        imageWidth: '120px'
    },
    {
        setId: '40585',
        image: '',
        setNumber: '40585',
        useSetImage: true,
        title: 'World of Wonders',
        description: 'LEGO set 40585 - new in box',
        price: '',
        imageWidth: '120px'
    },
    {
        setId: '40775',
        image: '',
        setNumber: '40775',
        useSetImage: true,
        title: "Mini Knight's Castle",
        description: 'LEGO set 40775 - new in box',
        price: '',
        imageWidth: '120px'
    },
    {
        setId: '40776',
        image: '',
        setNumber: '40776',
        useSetImage: true,
        title: "Hot Chocolate Stand",
        description: 'LEGO set 40776 - new in box',
        price: '',
        imageWidth: '120px'
    },
    {
        setId: '40704',
        image: '',
        setNumber: '40704',
        useSetImage: true,
        title: "Micro NINJAGO docks",
        description: 'LEGO set 40704 - new in box',
        price: '',
        imageWidth: '120px'
    },
    {
        setId: '40774',
        image: '',
        setNumber: '40774',
        useSetImage: true,
        title: "Classic Animation Scenes",
        description: 'LEGO set 40774 - new in box',
        price: '',
        imageWidth: '120px'
    }
];

const partsCards = [
    {
        partId: 'technic-bricks',
        image: 'assets/parts/technic01.jpg',
        title: 'Multiple Technic Bricks',
        description: '2 pounds of clean bricks',
        price: '',
        imageWidth: '120px'
    }
];

// Tab switching function
function switchTab(tabName) {
    // Hide all tab contents
    document.querySelectorAll('.tab-content').forEach(content => {
        content.classList.remove('active');
    });
    
    // Remove active class from all buttons
    document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    
    // Show selected tab
    document.getElementById(tabName + '-tab').classList.add('active');
    event.target.classList.add('active');
}

// Load prices from centralized file
async function initInventory() {
    try {
        const pricesLoaded = await loadPrices();
        console.log('Prices loaded:', pricesLoaded);
        
        // Update set prices
        for (let card of setsCards) {
            card.price = await getSetPrice(card.setId);
            console.log(`Set ${card.setId} price:`, card.price);
        }
        
        // Update part prices
        for (let card of partsCards) {
            card.price = await getPartPrice(card.partId);
            console.log(`Part ${card.partId} price:`, card.price);
        }
        
        // Render cards after prices are loaded
        console.log('Rendering sets cards:', setsCards);
        renderProductCards('sets-cards', setsCards);
        
        console.log('Rendering parts cards:', partsCards);
        renderProductCards('parts-cards', partsCards);
    } catch (error) {
        console.error('Error in initInventory:', error);
    }
}

fetch('navbar.html')
    .then(res => res.text())
    .then(html => {
        document.getElementById('navbar').innerHTML = html;
        // Initialize hamburger menu
        initHamburgerMenu();
        // Re-observe sections for fade-in animation after navbar loads
        if (window.IntersectionObserver) {
            document.querySelectorAll('section').forEach(section => {
                section.classList.remove('section-visible');
            });
            const observerOptions = { threshold: 0.1 };
            const sectionObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if(entry.isIntersecting){
                        entry.target.classList.add('section-visible');
                    }
                });
            }, observerOptions);
            document.querySelectorAll('section').forEach(section => {
                sectionObserver.observe(section);
            });
        }
        fetch('footer.html')
            .then(res => res.text())
            .then(html => document.getElementById('footer').innerHTML = html);
    });

// Initialize inventory with prices when DOM is ready
document.addEventListener('DOMContentLoaded', initInventory);
</script>
</body>
</html>
